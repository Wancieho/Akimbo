<<<<<<< HEAD
var akimbo={};!function(Akimbo){Akimbo.App={},Akimbo.App.Services={},Akimbo.App.Components={},Akimbo.App.Controllers={},Akimbo.App.Classes={},Akimbo.App.Config={},Akimbo.start=function(){new Akimbo.Main}}(akimbo),function(Akimbo){function Main(){void 0===history.pushState&&alert("history.pushState() not supported."),(null===instance||void 0!==runningTests&&runningTests===!0)&&(instance=this,instance.router=new Akimbo.Router,window.onpopstate=function(){instance.router.ignoreHistory=!0,navigate()},navigate())}function navigate(){instance.router.navigate(window.location.protocol.indexOf("http")!==-1?window.location.pathname.replace("/",""):"")}Akimbo.Main=Main;var instance=null}(akimbo),function(Akimbo){function Cache(){null===instance&&(instance=this)}Akimbo.Cache=Cache;var instance=null,data={};Cache.prototype={get:function(index){return void 0!==data[index]?data[index]:null},set:function(index,value){if(void 0===value)throw"Cache.set(): "+index+" value cannot be undefined";data[index]=value},remove:function(index){delete data[index]},removeAll:function(){data={}}}}(akimbo),function(Akimbo){function Component(){scope=this,scope.helper=new Akimbo.Helper}function loadTemplateAndInitiateComponent(component){$.ajaxSetup({async:!1}),$("["+component.meta.selector+"]").load(component.meta.templateUrl+"?"+(new Date).getTime(),function(){$("a").on("click",function(e){e.preventDefault()}),void 0===component.meta.templates?initiateComponent(component):(component.templatesLoaded=0,$.each(component.meta.templates,function(key){loadTemplate.apply(component,[component.meta.templates[key]])}))}),$.ajaxSetup({async:!0})}function initiateComponent(component){void 0!==component.constructor&&component.constructor(component),void 0!==component.listeners&&component.listeners(component),void 0!==component.events&&component.events(component),void 0!==component.init&&component.init(component),$("["+component.meta.selector+"]").fadeIn(200),void 0!==component.meta.components&&component instanceof Akimbo.App.Core==!1&&scope.loadComponents(component.meta.components)}function loadTemplate(templateObject){var component=this;$.ajax({url:templateObject.template}).done(function(html){templateObject.html=html,++component.templatesLoaded===$.map(component.meta.templates,function(value,index){return[value]}).length&&initiateComponent(component)})}Akimbo.Component=Component;var componentsLoaded=[],scope=null,layoutHasLoaded=!1;Component.prototype={load:function(classzor){if(void 0===classzor)throw'"'+classzor+'" not found';var component=new classzor;component.name=scope.helper.functionName(classzor);var initialState=JSON.parse(JSON.stringify(component));if(component.getDefaultInstance=function(){return initialState},componentsLoaded.unshift(component),component instanceof Akimbo.App.Core==!1){if(void 0===component.meta)throw'"'+component.name+'" meta property must be defined';if(void 0===component.meta.selector)throw'"'+component.name+'" meta property selector must be defined';if(void 0===component.meta.templateUrl||""===component.meta.templateUrl)throw'"'+component.name+'" meta property templateUrl must be defined';void 0===component.meta.layout&&(component.meta.layout="index"),layoutHasLoaded||($.ajaxSetup({async:!1}),$("[data-layout]").load("src/app/layouts/"+component.meta.layout+".html?"+(new Date).getTime(),function(){layoutHasLoaded=!0}),$.ajaxSetup({async:!0})),loadTemplateAndInitiateComponent(component)}return component},loadComponents:function(components){$.each(components,function(i,component){scope.load(component)})},setLayoutHasLoaded:function(loaded){layoutHasLoaded=loaded},unload:function(){$.each(componentsLoaded,function(i,component){void 0!==component.unload&&component.unload(),$("["+component.meta.selector+"]").empty().remove(),component=null}),componentsLoaded=[],$("[data-layout]").empty()}}}(akimbo),function(Akimbo){function Config(){null===instance&&(instance=this)}Akimbo.Config=Config;var instance=null;Config.prototype={get:function(config){if(config.indexOf(".")!==-1){var pieces=config.split("."),namespace=Akimbo.App.Config[pieces[0]];if(void 0===namespace)return null;for(var namespaces=new namespace,i=1;i<pieces.length;i++){if(void 0===namespaces[pieces[i]])return null;namespaces=namespaces[pieces[i]]}return namespaces}var chunk=Akimbo.App.Config[config];return void 0===chunk?null:new chunk}}}(akimbo),function(Akimbo){function Event(){}Akimbo.Event=Event;var listeners=[];Event.prototype={listen:function(event,callback,object){listeners.push({event:event,callback:callback,object:object})},broadcast:function(event,data,object){void 0===object&&(object=null),$.each(listeners,function(){var isWildCard=!1;this.event.indexOf("*")!==-1&&event.indexOf(this.event.replace("*",""))!==-1&&(isWildCard=!0),((void 0===object||null===object)&&event===this.event||void 0!==object&&null!==object&&JSON.stringify(object)===JSON.stringify(this.object)&&event===this.event||isWildCard)&&this.callback(data)})},remove:function(event){void 0!==event?$.each(listeners,function(i){this.event===event&&listeners.splice(i,1)}):listeners=[]}}}(akimbo),function(Akimbo){function Helper(){}Akimbo.Helper=Helper,Helper.prototype={functionName:function(func){var f="function"==typeof func,s=f&&(func.name&&["",func.name]||func.toString().match(/function ([^\(]+)/));return!f&&"not a function"||s&&s[1]||"anonymous"}}}(akimbo),function(Akimbo){function Router(){this.ignoreHistory=!1,this.config=new Akimbo.Config,this.component=new Akimbo.Component,this.event=new Akimbo.Event}function process(scope){busy=!0,destroy(scope),loadCore(scope),loadController(scope),$(document).on("click","a[disabled]",function(e){e.preventDefault()}),document.addEventListener?document.addEventListener("click",function(e){$(e.target).closest("a[disabled]").length&&(e.stopImmediatePropagation(),e.preventDefault())},!0):document.attachEvent("onclick",function(e){$(e.target).closest("a[disabled]").length&&(e.stopImmediatePropagation(),e.preventDefault())}),busy=!1}function destroy(scope){$("*").unbind().off().stop(!0,!0),$(window).off(),$(document).off(),scope.event.remove(),null!==core&&(scope.component.setLayoutHasLoaded(!1),scope.component.unload())}function loadCore(scope){core=new scope.component.load(Akimbo.App.Core),void 0!==core.constructor&&core.constructor(core),void 0!==core.listeners&&core.listeners(core),void 0!==core.events&&core.events(core),void 0!==core.init&&core.init(core),new scope.component.loadComponents(core.meta.components)}function loadController(scope){var controller=Akimbo.App.Controllers[route.controller];if(void 0===controller)throw"Akimbo.App.Controllers."+route.controller+" does not exist";controller=new scope.component.load(Akimbo.App.Controllers[route.controller]),removeClass&&$("body").removeClass(),void 0!==controller.meta&&void 0!==controller.meta.templateClass&&$("body").addClass(controller.meta.templateClass),(history.length>1||1===history.length&&""!==path)&&!scope.ignoreHistory&&window.location.pathname.replace("/","")!==path&&history.pushState({page:path},null,"/"+path),controller.segments=segments}Akimbo.Router=Router;var core=null,busy=!1,route={},path="",removeClass=!0,segments=[];Router.prototype={navigate:function(requestedPath,removeClassParam){var scope=this,routeExists=!1;if(segments=requestedPath.split("/"),removeClass=removeClassParam!==!1,!busy){var routes=scope.config.get("routes");for(var i in scope.config.get("routes"))requestedPath===routes[i].path&&(routeExists=!0,path=requestedPath,route=routes[i],process(scope));if(routeExists||$.each(scope.config.get("routes"),function(){if(this.path.indexOf("{")!==-1){var pathPieces=this.path.split("/"),segmentsMatch=!0;if(pathPieces.length===segments.length){for(var i in pathPieces)if(pathPieces[i].indexOf("{")===-1&&pathPieces[i]!==segments[i]){segmentsMatch=!1;break}}else segmentsMatch=!1;segmentsMatch&&(routeExists=!0,path=requestedPath,route=this,process(scope))}}),!routeExists)throw'"'+requestedPath+'" route not found'}},isProtectedRoute:function(){return route.protected}}}(akimbo),function(Akimbo){function Service(){this.listeners={},this.name="",this.serviceUrl="",this.uri="",this.events=$.extend(!0,{create:{done:"create.done",fail:"create.fail",complete:"create.complete"},read:{done:"read.done",fail:"read.fail",complete:"read.complete"},update:{done:"update.done",fail:"update.fail",complete:"update.complete"},destroy:{done:"destroy.done",fail:"destroy.fail",complete:"destroy.complete"},index:{done:"index.done",fail:"index.fail",complete:"index.complete"}},this.overrideEvents),function(scope){scope.config=new Akimbo.Config,scope.cache=new Akimbo.Cache,scope.event=new Akimbo.Event}(this)}Akimbo.Service=Service,Service.prototype.validate=function(){if(void 0===this.name||null===this.name||""===this.name)throw'"this.name" must be supplied.';if(void 0===this.serviceUrl||null===this.serviceUrl||""===this.serviceUrl)throw'"this.serviceUrl" must be supplied.'},Service.prototype.create=function(params,object,overrideEvents){this.validate();var scope=this,events=$.extend(!0,this.events,overrideEvents);this.listeners.create=$.ajax({url:this.serviceUrl+"/"+this.uri,type:"POST",data:params,contentType:"application/json"}).done(function(response){scope.event.broadcast(events.create.done,response,void 0!==object&&null!==object?$.extend({},scope,object):scope)}).fail(function(xhr){scope.event.broadcast(events.create.fail,void 0!==xhr.responseJSON?xhr.responseJSON:xhr,void 0!==object&&null!==object?$.extend({},scope,object):scope)}).complete(function(){scope.event.broadcast(events.create.complete,null,void 0!==object&&null!==object?$.extend({},scope,object):scope)})},Service.prototype.read=function(params,object,overrideEvents){this.validate();var scope=this,events=$.extend(!0,this.events,overrideEvents),identifier="read";void 0!==params&&null!==params&&void 0!==params.identifier&&(identifier=params.identifier),this.listeners.read=$.ajax({url:this.serviceUrl+"/"+this.uri+"/"+identifier,type:"GET",headers:params}).done(function(response){scope.event.broadcast(events.read.done,response,void 0!==object&&null!==object?$.extend({},scope,object):scope)}).fail(function(xhr){scope.event.broadcast(events.read.fail,void 0!==xhr.responseJSON?xhr.responseJSON:xhr,void 0!==object&&null!==object?$.extend({},scope,object):scope)}).complete(function(){scope.event.broadcast(events.read.complete,null,void 0!==object&&null!==object?$.extend({},scope,object):scope)})},Service.prototype.update=function(params,object,overrideEvents){this.validate();var scope=this,events=$.extend(!0,this.events,overrideEvents);this.listeners.update=$.ajax({url:this.serviceUrl+"/"+this.uri,type:"PUT",data:params,contentType:"application/json"}).done(function(response){scope.event.broadcast(events.update.done,response,void 0!==object&&null!==object?$.extend({},scope,object):scope)}).fail(function(xhr){scope.event.broadcast(events.update.fail,void 0!==xhr.responseJSON?xhr.responseJSON:xhr,void 0!==object&&null!==object?$.extend({},scope,object):scope)}).complete(function(){scope.event.broadcast(events.update.complete,null,void 0!==object&&null!==object?$.extend({},scope,object):scope)})},Service.prototype.destroy=function(params,object,overrideEvents){this.validate();var scope=this,events=$.extend(!0,this.events,overrideEvents);this.listeners.update=$.ajax({url:this.serviceUrl+"/"+this.uri,type:"DELETE",data:params,contentType:"application/json"}).done(function(response){scope.event.broadcast(events.destroy.done,response,void 0!==object&&null!==object?$.extend({},scope,object):scope)}).fail(function(xhr){scope.event.broadcast(events.destroy.fail,void 0!==xhr.responseJSON?xhr.responseJSON:xhr,void 0!==object&&null!==object?$.extend({},scope,object):scope)}).complete(function(){scope.event.broadcast(events.destroy.complete,null,void 0!==object&&null!==object?$.extend({},scope,object):scope)})},Service.prototype.index=function(params,object,overrideEvents){this.validate();var scope=this,events=$.extend(!0,this.events,overrideEvents);this.listeners.index=$.ajax({url:this.serviceUrl+"/"+this.uri,type:"GET",headers:params}).done(function(response){scope.event.broadcast(events.index.done,response,void 0!==object&&null!==object?$.extend({},scope,object):scope)}).fail(function(xhr){scope.event.broadcast(events.index.fail,void 0!==xhr.responseJSON?xhr.responseJSON:xhr,void 0!==object&&null!==object?$.extend({},scope,object):scope)}).complete(function(){scope.event.broadcast(events.index.complete,null,void 0!==object&&null!==object?$.extend({},scope,object):scope)})},Service.prototype.cancel=function(listener){void 0!==listener?null!==this.listeners[listener]&&this.listeners[listener].abort():$.each(this.listeners,function(){this.abort()})},Service.prototype.listen=function(event,callback,object){if(void 0===object)throw'listener "object" parameter must be specified for '+this.name;this.event.listen(event,callback,void 0!==object&&null!==object?$.extend({},this,object):this)}}(akimbo),function(Akimbo){function Test(){}Akimbo.Test=Test,Test.prototype={component:function(classzor){var component=new classzor;if(void 0===component.meta)throw'"'+component.name+'" meta property must be defined';if(void 0===component.meta.constructor)throw'"'+component.name.constructor+'" constructor must be defined';return $.ajaxSetup({async:!1}),$("body").remove("["+component.meta.selector+"]").append("<div "+component.meta.selector+' style="display:none"></div>'),$("["+component.meta.selector+"]").load("../"+component.meta.templateUrl+"?"+(new Date).getTime(),function(){}),$.ajaxSetup({async:!0}),component.getDefaultInstance=function(){return component},component.constructor(component),void 0!==component.listeners&&component.listeners(component),void 0!==component.events&&component.events(component),component}}}(akimbo);
=======
var akimbo={};!function(e){e.App={},e.App.Services={},e.App.Components={},e.App.Controllers={},e.App.Classes={},e.App.Config={},document.onreadystatechange=function(){"complete"===this.readyState&&new e.Main}}(akimbo),function(e){function t(){void 0===history.pushState&&alert("history.pushState() not supported."),null===o&&!0!==window.runningTests&&(o=this,o.router=new e.Router,window.onpopstate=function(){o.router.ignoreHistory=!0,n()},n())}function n(){o.router.navigate(-1!==window.location.protocol.indexOf("http")?window.location.pathname.replace("/",""):"")}e.Main=t;var o=null}(akimbo),function(e){function t(){null===n&&(n=this)}e.Cache=t;var n=null,o={};t.prototype={get:function(e){return void 0!==o[e]?o[e]:null},set:function(e,t){if(void 0===t)throw"Cache.set(): "+e+" value cannot be undefined";o[e]=t},remove:function(e){delete o[e]},removeAll:function(){o={}}}}(akimbo),function(e){function t(){r=this,r.event=new e.Event,r.helper=new e.Helper}function n(e){$("["+e.meta.selector+"]").load(e.meta.templateUrl+"?"+(new Date).getTime(),function(){$("a").on("click",function(e){e.preventDefault()}),void 0===e.meta.templates?o(e):(e.templatesLoaded=0,$.each(e.meta.templates,function(t){i.apply(e,[e.meta.templates[t]])}))})}function o(t){void 0!==t.constructor&&setTimeout(function(){t.constructor(t)},100),void 0!==t.before&&setTimeout(function(){t.before(t)},100),void 0!==t.after&&setTimeout(function(){t.after(t)},150),$("["+t.meta.selector+"]").fadeIn(200),void 0!==t.meta.components&&t instanceof e.App.Core==!1&&r.loadComponents(t.meta.components)}function i(e){var t=this;$.ajax({url:e.template}).done(function(n){e.html=n,++t.templatesLoaded===$.map(t.meta.templates,function(e,t){return[e]}).length&&o(t)})}e.Component=t;var a=[],r=null,s=!1;t.prototype={load:function(t){if(void 0===t)throw'"'+t+'" not found';var o=new t;o.name=r.helper.functionName(t);var i=JSON.parse(JSON.stringify(o));if(o.getDefaultInstance=function(){return i},a.unshift(o),o instanceof e.App.Core==!1){if(void 0===o.meta)throw'"'+o.name+'" meta property must be defined';if(void 0===o.meta.selector)throw'"'+o.name+'" meta property selector must be defined';if(void 0===o.meta.templateUrl||""===o.meta.templateUrl)throw'"'+o.name+'" meta property templateUrl must be defined';void 0===o.meta.layout&&(o.meta.layout="index"),s?n(o):$("[data-layout]").load("src/app/layouts/"+o.meta.layout+".html?"+(new Date).getTime(),function(){s=!0,r.event.broadcast("layout.loaded")})}return r.event.listen("layout.loaded",function(){o instanceof e.App.Core==!1&&n(o)}),o},loadComponents:function(e){$.each(e,function(e,t){r.load(t)})},setLayoutHasLoaded:function(e){s=e},unload:function(){$.each(a,function(e,t){void 0!==t.unload&&t.unload(),$("["+t.meta.selector+"]").empty().remove(),t=null}),a=[],$("[data-layout]").empty()}}}(akimbo),function(e){function t(){null===n&&(n=this)}e.Config=t;var n=null;t.prototype={get:function(t){if(-1!==t.indexOf(".")){for(var n=t.split("."),o=new e.App.Config[n[0]],i=1;i<n.length;i++){if(void 0===o[n[i]])throw'"'+t+'" config does not exist';o=o[n[i]]}return o}return new e.App.Config[t]}}}(akimbo),function(e){function t(){}e.Event=t;var n=[];t.prototype={listen:function(e,t,o){n.push({event:e,callback:t,object:o})},broadcast:function(e,t,o){void 0===o&&(o=null),$.each(n,function(){var n=!1;-1!==this.event.indexOf("*")&&-1!==e.indexOf(this.event.replace("*",""))&&(n=!0),((void 0===o||null===o)&&e===this.event||void 0!==o&&null!==o&&JSON.stringify(o)===JSON.stringify(this.object)&&e===this.event||n)&&this.callback(t)})},remove:function(e){void 0!==e?$.each(n,function(t){this.event===e&&n.splice(t,1)}):n=[]}}}(akimbo),function(e){function t(){}e.Helper=t,t.prototype={functionName:function(e){var t="function"==typeof e,n=t&&(e.name&&["",e.name]||e.toString().match(/function ([^\(]+)/));return!t&&"not a function"||n&&n[1]||"anonymous"}}}(akimbo),function(e){function t(){this.ignoreHistory=!1,this.config=new e.Config,this.component=new e.Component,this.event=new e.Event}function n(e){l=!0,o(e),i(e),a(e),r(e),$(document).on("click","a[disabled]",function(e){e.preventDefault()}),document.addEventListener?document.addEventListener("click",function(e){$(e.target).closest("a[disabled]").length&&(e.stopImmediatePropagation(),e.preventDefault())},!0):document.attachEvent("onclick",function(e){$(e.target).closest("a[disabled]").length&&(e.stopImmediatePropagation(),e.preventDefault())}),l=!1}function o(e){$("*").unbind().off().stop(!0,!0),$(window).off(),$(document).off(),e.event.remove(),null!==s&&(e.component.setLayoutHasLoaded(!1),e.component.unload())}function i(t){s=new t.component.load(e.App.Core),void 0!==s.constructor&&s.constructor(s),void 0!==s.before&&s.before(s)}function a(t){var n=e.App.Controllers[c.controller];if(void 0===n)throw"Akimbo.App.Controllers."+c.controller+" does not exist";n=new t.component.load(e.App.Controllers[c.controller]),u&&$("body").removeClass(),void 0!==n.meta&&void 0!==n.meta.templateClass&&$("body").addClass(n.meta.templateClass),(history.length>1||1===history.length&&""!==d)&&!t.ignoreHistory&&window.location.pathname.replace("/","")!==d&&history.pushState({page:d},null,"/"+d),n.segments=p}function r(e){e.event.listen("layout.loaded",function(){new e.component.loadComponents(s.meta.components),setTimeout(function(){void 0!==s.after&&s.after(s)},50)})}e.Router=t;var s=null,l=!1,c={},d="",u=!0,p=[];t.prototype={navigate:function(e,t){var o=this,i=!1;if(p=e.split("/"),u=!1!==t,!l){var a=o.config.get("routes");for(var r in o.config.get("routes"))e===a[r].path&&(i=!0,d=e,c=a[r],n(o));if(i||$.each(o.config.get("routes"),function(){if(-1!==this.path.indexOf("{")){var t=this.path.split("/"),a=!0;if(t.length===p.length){for(var r in t)if(-1===t[r].indexOf("{")&&t[r]!==p[r]){a=!1;break}}else a=!1;a&&(i=!0,d=e,c=this,n(o))}}),!i)throw'"'+e+'" route not found'}},isProtectedRoute:function(){return c.protected}}}(akimbo),function(e){function t(){this.listeners={},this.name="",this.serviceUrl="",this.uri="",this.events=$.extend(!0,{create:{done:"create.done",fail:"create.fail",complete:"create.complete"},read:{done:"read.done",fail:"read.fail",complete:"read.complete"},update:{done:"update.done",fail:"update.fail",complete:"update.complete"},destroy:{done:"destroy.done",fail:"destroy.fail",complete:"destroy.complete"},index:{done:"index.done",fail:"index.fail",complete:"index.complete"}},this.overrideEvents),function(t){t.config=new e.Config,t.cache=new e.Cache,t.event=new e.Event}(this)}e.Service=t,t.prototype.validate=function(){if(void 0===this.name||null===this.name||""===this.name)throw'"this.name" must be supplied.';if(void 0===this.serviceUrl||null===this.serviceUrl||""===this.serviceUrl)throw'"this.serviceUrl" must be supplied.'},t.prototype.create=function(e,t,n){this.validate();var o=this,i=$.extend(!0,this.events,n);this.listeners.create=$.ajax({url:this.serviceUrl+"/"+this.uri,type:"POST",data:e,contentType:"application/json"}).done(function(e){o.event.broadcast(i.create.done,e,void 0!==t&&null!==t?$.extend({},o,t):o)}).fail(function(e){o.event.broadcast(i.create.fail,void 0!==e.responseJSON?e.responseJSON:e,void 0!==t&&null!==t?$.extend({},o,t):o)}).complete(function(){o.event.broadcast(i.create.complete,null,void 0!==t&&null!==t?$.extend({},o,t):o)})},t.prototype.read=function(e,t,n){this.validate();var o=this,i=$.extend(!0,this.events,n),a="read";void 0!==e&&null!==e&&void 0!==e.identifier&&(a=e.identifier),this.listeners.read=$.ajax({url:this.serviceUrl+"/"+this.uri+"/"+a,type:"GET",headers:e}).done(function(e){o.event.broadcast(i.read.done,e,void 0!==t&&null!==t?$.extend({},o,t):o)}).fail(function(e){o.event.broadcast(i.read.fail,void 0!==e.responseJSON?e.responseJSON:e,void 0!==t&&null!==t?$.extend({},o,t):o)}).complete(function(){o.event.broadcast(i.read.complete,null,void 0!==t&&null!==t?$.extend({},o,t):o)})},t.prototype.update=function(e,t,n){this.validate();var o=this,i=$.extend(!0,this.events,n);this.listeners.update=$.ajax({url:this.serviceUrl+"/"+this.uri,type:"PUT",data:e,contentType:"application/json"}).done(function(e){o.event.broadcast(i.update.done,e,void 0!==t&&null!==t?$.extend({},o,t):o)}).fail(function(e){o.event.broadcast(i.update.fail,void 0!==e.responseJSON?e.responseJSON:e,void 0!==t&&null!==t?$.extend({},o,t):o)}).complete(function(){o.event.broadcast(i.update.complete,null,void 0!==t&&null!==t?$.extend({},o,t):o)})},t.prototype.destroy=function(e,t,n){this.validate();var o=this,i=$.extend(!0,this.events,n);this.listeners.update=$.ajax({url:this.serviceUrl+"/"+this.uri,type:"DELETE",data:e,contentType:"application/json"}).done(function(e){o.event.broadcast(i.destroy.done,e,void 0!==t&&null!==t?$.extend({},o,t):o)}).fail(function(e){o.event.broadcast(i.destroy.fail,void 0!==e.responseJSON?e.responseJSON:e,void 0!==t&&null!==t?$.extend({},o,t):o)}).complete(function(){o.event.broadcast(i.destroy.complete,null,void 0!==t&&null!==t?$.extend({},o,t):o)})},t.prototype.index=function(e,t,n){this.validate();var o=this,i=$.extend(!0,this.events,n);this.listeners.index=$.ajax({url:this.serviceUrl+"/"+this.uri,type:"GET",headers:e}).done(function(e){o.event.broadcast(i.index.done,e,void 0!==t&&null!==t?$.extend({},o,t):o)}).fail(function(e){o.event.broadcast(i.index.fail,void 0!==e.responseJSON?e.responseJSON:e,void 0!==t&&null!==t?$.extend({},o,t):o)}).complete(function(){o.event.broadcast(i.index.complete,null,void 0!==t&&null!==t?$.extend({},o,t):o)})},t.prototype.cancel=function(e){void 0!==e?null!==this.listeners[e]&&this.listeners[e].abort():$.each(this.listeners,function(){this.abort()})},t.prototype.listen=function(e,t,n){if(void 0===n)throw'listener "object" parameter must be specified for '+this.name;this.event.listen(e,t,void 0!==n&&null!==n?$.extend({},this,n):this)}}(akimbo),function(e){function t(){}e.Test=t,t.prototype={component:function(e){var t=new e;if(void 0===t.meta)throw'"'+t.name+'" meta property must be defined';if(void 0===t.meta.constructor)throw'"'+t.name.constructor+'" constructor must be defined';return $.ajaxSetup({async:!1}),$("body").remove("["+t.meta.selector+"]").append("<div "+t.meta.selector+' style="display:none"></div>'),$("["+t.meta.selector+"]").load("../"+t.meta.templateUrl+"?"+(new Date).getTime(),function(){}),$.ajaxSetup({async:!0}),t.getDefaultInstance=function(){return t},t.constructor(t),void 0!==t.listeners&&t.listeners(t),t}}}(akimbo);
>>>>>>> master
